syntax = "proto3";

package edu.cheap_course;

option go_package = "pkg/api/v1;edu.cheap_course";

import "google/protobuf/timestamp.proto";

enum Role {
    ADMIN = 0;
    TEACHER = 1;
    STUDENT = 3;
}
enum MutationType {
    CREATE = 0;
    UPDATE = 1;
    DELETE = 2;
}
message User {
    string id = 1;
    string name = 2;
    string email = 3;
    Role role = 4;
    google.protobuf.Timestamp created_at = 5;
}

message Course {
    string id = 1;
    string teacher_id = 2;
    string title = 3;
    string description = 4;
    float price = 5;
    google.protobuf.Timestamp created_at = 6;
    google.protobuf.Timestamp updated_at = 7;
}

message CourseCategory {
    string id = 1;
    string name = 2;
    string description = 3;
}

message Chapter {
    string id = 1;
    string course_id = 2;
    string title = 3;
    int32 order_index = 4;
}

message Lesson {
    string id = 1;
    string course_id = 2;
    string chapter_id = 3;
    string title = 4;
    string content = 5;
    int32 order_index = 6;
}
message UserRequest {
    MutationType mutation_type = 1;
    optional string id = 2;
    optional string name = 3;
    optional string email = 4;
    optional Role role = 5;
    optional string password_hash = 6;
}
message CourseRequest {
    MutationType mutation_type = 1;
    optional string id = 2;
    optional string teacher_id = 3;
    optional string title = 4;
    optional string description = 5;
    optional float price = 6;
}
message MutationResponse {
    bool success = 1;
    string id = 2;
}
service CourseService {
    // User
    rpc MutationUser(UserRequest) returns (MutationResponse) {}
    rpc GetUsers(GetUserRequest) returns (GetUserResponse) {}
    rpc ListUsers(ListUsersRequest) returns (ListUsersResponse) {}
    // Course
    rpc MutationCourse(CourseRequest) returns (MutationResponse) {}
    rpc GetCourses(GetCourseRequest) returns (GetCourseResponse) {}
    rpc ListCourses(ListCoursesRequest) returns (ListCoursesResponse) {}
    // CourseCategory
    rpc CreateCourseCategory(CreateCourseCategoryRequest) returns (CreateCourseCategoryResponse) {}
    rpc GetCourseCategories(GetCourseCategoryRequest) returns (GetCourseCategoryResponse) {}
    rpc UpdateCourseCategory(UpdateCourseCategoryRequest) returns (UpdateCourseCategoryResponse) {}
    rpc DeleteCourseCategory(DeleteCourseCategoryRequest) returns (DeleteCourseCategoryResponse) {}
    rpc ListCourseCategories(ListCourseCategoriesRequest) returns (ListCourseCategoriesResponse) {}
    // Chapter
    rpc CreateChapter(CreateChapterRequest) returns (CreateChapterResponse) {}
    rpc GetChapters(GetChapterRequest) returns (GetChapterResponse) {}
    rpc UpdateChapter(UpdateChapterRequest) returns (UpdateChapterResponse) {}
    rpc DeleteChapter(DeleteChapterRequest) returns (DeleteChapterResponse) {}
    rpc ListChapters(ListChaptersRequest) returns (ListChaptersResponse) {}
    /// Lesson
    rpc CreateLesson(CreateLessonRequest) returns (CreateLessonResponse) {}
    rpc GetLessons(GetLessonRequest) returns (GetLessonResponse) {}
    rpc UpdateLesson(UpdateLessonRequest) returns (UpdateLessonResponse) {}
    rpc DeleteLesson(DeleteLessonRequest) returns (DeleteLessonResponse) {}
    rpc ListLessons(ListLessonsRequest) returns (ListLessonsResponse) {}
}